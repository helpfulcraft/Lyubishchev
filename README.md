# 柳比歇夫时间统计报告生成器

这是一个用于个人时间记录和分析的工具，灵感来源于柳比歇夫的时间统计法。它可以解析特定格式的每日日志，生成可视化的HTML报告，并对历史数据进行归档和周期性分析。

## ✨ 功能特性

- **图形化用户界面 (GUI)**: 提供一个简洁的GUI，用于生成每日和周期性报告。
- **每日报告**: 解析形如 `log.md` 的日志文件，快速生成当日的时间花费报告。
- **周期性报告**: 基于历史数据，一键生成周报、月报或最近7天的总结报告。
- **数据可视化**: 通过饼图、旭日图和堆叠柱状图等多种图表，直观展示时间分配。
- **历史数据追踪**: 自动将每日数据归档到 `historical_data.csv`，用于长期趋势分析。
- **高度可定制**: 报告模板和颜色配置等均可在代码中轻松修改。

## 🚀 如何开始

### 主要用法 (推荐)

直接双击运行根目录下的 `run_gui.bat` 文件。

> **提示**: 你可以为 `run_gui.bat` 创建一个桌面快捷方式，方便每日使用。

程序启动后，你将看到一个带两个标签页的窗口：

1.  **每日报告**:
    *   在文本框中粘贴你当天的日志内容。
    *   点击 "一键生成每日报告" 按钮。
    *   程序会自动处理你的日志，生成报告，并用默认浏览器打开。

2.  **周期报告**:
    *   选择你想要的报告周期（本周、本月、最近7天）。
    *   点击 "生成周期报告" 按钮。
    *   程序会根据历史数据生成对应的周期报告，并自动打开。

### 目录结构

```
.
├── cmd_scripts/          <-- 存放命令行批处理脚本
│   ├── run_daily_from_log.bat
│   └── run_periodic_report.bat
│
├── data/                 <-- 存放原始数据和处理后的数据
│   ├── historical_data.csv
│   └── log.md
│
├── reports/              <-- 所有生成的HTML报告都存放在这里
│
├── scripts/              <-- 核心Python脚本
│   ├── build_report.py
│   ├── generate_periodic_report.py
│   ├── process_log.py
│   └── run_app.py
│
├── templates/            <-- HTML报告的Jinja2模板
│   └── new_report_template.html
│
└── run_gui.bat           <-- GUI启动器 (主要入口)
```

### 进阶用法 (命令行)

对于熟悉命令行的用户，`cmd_scripts` 目录下提供了两个脚本用于自动化：

-   `run_daily_from_log.bat`: 从 `data/log.md` 文件直接生成每日报告，不会打开GUI。
-   `run_periodic_report.bat [period]`: 生成周期报告。`[period]` 可以是 `week`, `month`, 或 `last7days`。例如:
    ```bash
    # 在 cmd_scripts 目录中运行
    run_periodic_report.bat month
    ```

## 📝 日志格式

程序依赖 `data/log.md` 中的特定格式。请确保你的日志遵循以下示例：

```markdown
## 6.18

一、杂项
- 日常（琐事1h 20m）
- 工程（写代码3h 45m+15m）

二、第二类
- 锻炼（跑步30m）
- 学习（阅读源码1h）
```

- 日期格式为 `## 月.日`。
- 使用 `-` 和 `、` 来定义主分类。
- 使用嵌套的 `-` 和 `()` 来定义子分类和任务。
- 时间格式为 `Xh` 或 `Ym` 或 `Xh Ym`。
- 可以用 `+` 来连接同一任务的多个时间段。 